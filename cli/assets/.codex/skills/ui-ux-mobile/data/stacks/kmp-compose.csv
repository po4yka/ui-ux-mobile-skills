Category,Guideline,Description,Do,Don't,Code Good,Code Bad,Severity,Docs URL
Architecture,Use shared UI in commonMain,Compose Multiplatform UI goes in commonMain,Put @Composable functions in commonMain,Duplicate UI code in androidMain and iosMain,"// commonMain: @Composable fun AppScreen() { MaterialTheme { Content() } }","// androidMain: @Composable fun AppScreen() {...} // iosMain: @Composable fun AppScreen() {...}",High,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-create-first-app.html
Architecture,Use expect/actual for platform APIs,Bridge platform-specific functionality cleanly,Define expect in commonMain actual in platform modules,Use platform checks with if statements,"// commonMain: expect fun getPlatformName(): String // androidMain: actual fun getPlatformName() = ""Android""","if (Platform.isAndroid) { androidCode() } else { iosCode() }",High,https://kotlinlang.org/docs/multiplatform-expect-actual.html
Architecture,Share ViewModels across platforms,ViewModel logic belongs in shared module,Put ViewModel in commonMain use StateFlow,Create separate ViewModels per platform,"// commonMain: class AppViewModel { val state: StateFlow<UiState> }","// androidMain: class AndroidViewModel // iosMain: class iOSViewModel",High,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-state-management.html
State,Use StateFlow for UI state,StateFlow works seamlessly with Compose,Expose StateFlow from ViewModels collect in composables,Use platform-specific state holders,"class ViewModel { private val _state = MutableStateFlow(UiState()); val state = _state.asStateFlow() }","LiveData on Android Combine on iOS",High,https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-state-flow/
State,Use SharedFlow for events,SharedFlow for one-time events navigation toasts,Emit events to SharedFlow collect in UI,Use StateFlow for events,val events = MutableSharedFlow<Event>() // emit once per event,val event = MutableStateFlow<Event?>(null) // needs manual reset,Medium,https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-shared-flow/
State,Collect with lifecycle awareness,Respect Android lifecycle when collecting,Use collectAsStateWithLifecycle on Android collectAsState cross-platform,Collect without lifecycle awareness,"val state by viewModel.state.collectAsState()","LaunchedEffect(Unit) { viewModel.state.collect { } } // no lifecycle",High,https://developer.android.com/topic/libraries/architecture/lifecycle
UI,Use Material 3 components,Material 3 works on all KMP targets,Import from compose.material3 in commonMain,Use platform-specific UI frameworks,"import androidx.compose.material3.Button; @Composable fun MyButton() { Button(onClick = {}) { Text(""Click"") } }","UIKit buttons on iOS Compose on Android",High,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-material3.html
UI,Handle platform text input,Platform text input needs expect/actual,Use PlatformImeOptions for keyboard configuration,Ignore platform keyboard differences,"TextField(keyboardOptions = KeyboardOptions(imeAction = ImeAction.Done, keyboardType = KeyboardType.Email))","TextField() // default keyboard everywhere",Medium,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-ios.html
UI,Adapt to WindowSizeClass,Handle different screen sizes responsively,Use calculateWindowSizeClass adapt layout,Use fixed layouts ignore screen size,"val windowSizeClass = calculateWindowSizeClass(); when (windowSizeClass.widthSizeClass) { Compact -> PhoneLayout(); Medium -> TabletLayout() }","PhoneLayout() // everywhere",High,https://developer.android.com/develop/ui/compose/layouts/adaptive
Resources,Use compose.resources,Shared resources across platforms,Put resources in commonMain/composeResources,Duplicate resources in platform folders,"// commonMain/composeResources/drawable/icon.xml; Image(painterResource(Res.drawable.icon))","// androidMain/res/drawable/icon.xml // iosMain separate asset",High,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-resources.html
Resources,Use string resources,Localization through shared resources,Define strings in commonMain/composeResources/values,Hardcode strings in composables,"Text(stringResource(Res.string.greeting))","Text(""Hello"") // not localized",Medium,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-resources.html#strings
Navigation,Use navigation library,Type-safe navigation for KMP,Use compose-navigation or Decompose,Build custom navigation state,"NavHost(navController, ""home"") { composable(""home"") { HomeScreen() } composable(""detail/{id}"") { DetailScreen(it.arguments?.getString(""id"")) } }","var currentScreen by remember { mutableStateOf<Screen>(Screen.Home) }",High,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-navigation.html
DI,Use Koin for dependency injection,Koin has excellent KMP support,Configure Koin in commonMain use modules,Use platform-specific DI frameworks,"val appModule = module { singleOf(::Repository); factoryOf(::ViewModel) }; startKoin { modules(appModule) }","Hilt on Android manual DI on iOS",High,https://insert-koin.io/docs/reference/koin-mp/kmp/
Platform,SwiftUI interop for iOS native,Embed SwiftUI views when needed,Use UIKitViewController for native iOS views,Reimplement iOS-specific UI in Compose,"// iosMain: @Composable fun NativeMapView() { UIKitViewController(factory = { MKMapView() }) }","// Recreate MapKit in Compose",Medium,https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-multiplatform-ios-integration.html
Platform,Android native interop,Embed Android views when needed,Use AndroidView for native Android views,Reimplement Android-specific UI,"// androidMain: @Composable fun NativeMapView() { AndroidView(factory = { MapView(it) }) }","// Recreate MapView in Compose",Medium,https://developer.android.com/develop/ui/compose/migrate/interoperability-apis/views-in-compose
Testing,Test in commonTest,Shared tests for shared code,Write tests in commonTest for ViewModels and logic,Duplicate tests in androidTest and iosTest,"// commonTest: @Test fun viewModelTest() { val vm = ViewModel(); assertEquals(expected, vm.state.value) }","// androidTest: same test // iosTest: same test",High,https://kotlinlang.org/docs/multiplatform-run-tests.html
Testing,Use Compose UI testing,Test composables with ComposeTestRule,Use createComposeRule for UI tests,Skip UI testing rely on manual testing,"@Test fun buttonTest() { rule.setContent { MyButton() }; rule.onNodeWithText(""Click"").performClick() }","// No UI tests",Medium,https://developer.android.com/develop/ui/compose/testing
Performance,Minimize expect/actual usage,Too many expect/actual adds complexity,Share as much code as possible,Create expect/actual for everything,"// expect/actual only for FileSystem Platform etc","// expect/actual for every function",Medium,https://kotlinlang.org/docs/multiplatform-expect-actual.html#rules-for-expected-and-actual-declarations
